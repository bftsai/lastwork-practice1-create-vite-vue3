import{S as a}from"./sweetalert2-sMC6pgnJ.js";import{_ as l,o as m,c as h,a as t,b as f,r,d as n,F as v}from"./index-lfoDoBPp.js";const _="https://ec-course-api.hexschool.io/",b={data(){return{}},methods:{async logout(){try{const e=(await this.axios.post(`${_}v2/logout`)).data;console.log(e),e.success&&(document.cookie="hexToken='';expires=Thu, 01 Jan 1970 00:00:00 UTC",a.fire({title:e.message,icon:"success",showConfirmButton:!1,timer:1500}),this.$router.push({name:"member"}))}catch(e){a.fire({title:e.response.message,icon:"error",showConfirmButton:!1,timer:1500}),document.cookie="hexToken='';expires=Thu, 01 Jan 1970 00:00:00 UTC",this.$router.push({name:"member"})}}},mounted(){}},$={class:"navbar navbar-expand-lg"},x={class:"container"},k=t("a",{class:"navbar-brand",href:"#"},"Navbar",-1),T=t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1),w={class:"collapse navbar-collapse",id:"navbarNav"},C={class:"navbar-nav"},N=f('<li class="nav-item"><a class="nav-link fs-md-4 fs-6 active" aria-current="page" href="#">Home</a></li><li class="nav-item"><a class="nav-link fs-md-4 fs-6" href="#">Features</a></li><li class="nav-item"><a class="nav-link fs-md-4 fs-6" href="#">Pricing</a></li>',3),y={class:"nav-item"};function L(e,s,u,d,g,o){return m(),h("nav",$,[t("div",x,[k,T,t("div",w,[t("ul",C,[N,t("li",y,[t("a",{class:"nav-link fs-md-4 fs-6",onClick:s[0]||(s[0]=(...i)=>o.logout&&o.logout(...i))},"Log Out")])])])])])}const B=l(b,[["render",L]]),c="https://ec-course-api.hexschool.io/",P="bftsai",J={data(){return{}},emits:["emit-member","emit-toggleLoading","emitToggleLoading","emit-dashboard-page"],props:["isLogin"],components:{Navbar:B},methods:{isMemberPage(){location.href.split("#/")[1]==="member"?this.$emit("emit-member",!1):this.$emit("emit-member",!0)},isDashboardPage(){this.$emit("emit-dashboard-page")},async checkLogin(){try{this.$emit("emit-toggleLoading");const e=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=e;const s=(await this.axios.post("https://ec-course-api.hexschool.io//v2/api/user/check")).data;this.$emit("emit-toggleLoading"),s.success||(a.fire({icon:"error",title:`${s.message}`,showConfirmButton:!1,timer:800}),this.logout(),this.$router.push("member"))}catch(e){console.log(e),this.$router.push("member"),this.$emit("emit-toggleLoading")}},async logout(){try{const e=(await this.axios.post(`${c}v2/logout`)).data;console.log(e),e.success&&(document.cookie="hexToken='';expires=Thu, 01 Jan 1970 00:00:00 UTC",a.fire({title:e.message,icon:"success",showConfirmButton:!1,timer:1500}),this.$router.push("member"))}catch(e){console.log(e.response),document.cookie="hexToken='';expires=Thu, 01 Jan 1970 00:00:00 UTC",this.$router.push("member")}},async getProducts(e){try{const s=(await this.axios.get(`${c}v2/api/${P}/admin/products?page=${e}`)).data}catch(s){console.log(s)}}},created(){this.isMemberPage(),this.isDashboardPage(),this.checkLogin()}},U={class:"container-fluid"};function D(e,s,u,d,g,o){const i=r("Navbar"),p=r("router-view");return m(),h(v,null,[n(i),t("div",U,[n(p)])],64)}const V=l(J,[["render",D]]);export{V as default};
