import{d as f,s as w,c as x,l as k,F as L,a as y,E as V,z as U,r as S,e as C,b as T}from"./zh_TW-20LIi70E.js";import{_ as B,L as P,S as d,r as m,c as g,d as i,a as e,l as z,T as F,f as _,w as b,F as q,o as h,n as u}from"./index-t2B9Fc_8.js";const E="ar",M={alpha:"{field} يجب ان يحتوي على حروف فقط",alpha_num:"{field} قد يحتوي فقط على حروف وارقام",alpha_dash:"{field} قد يحتوي على حروف او الرموز - و _",alpha_spaces:"{field} قد يحتوي فقط على حروف ومسافات",between:"قيمة {field} يجب ان تكون ما بين 0:{min} و 1:{max}",confirmed:"{field} لا يماثل التأكيد",digits:"{field} يجب ان تحتوي فقط على ارقام والا يزيد عددها عن 0:{length} رقم",dimensions:"{field} يجب ان تكون بمقاس 0:{width} بكسل في 1:{height} بكسل",email:"{field} يجب ان يكون بريدا اليكتروني صحيح",not_one_of:"الحقل {field} غير صحيح",ext:"نوع ملف {field} غير صحيح",image:"{field} يجب ان تكون صورة",integer:"الحقل {field} يجب ان يكون عدداً صحيحاً",length:"حقل {field} يجب الا يزيد عن 0:{length}",max_value:"قيمة الحقل {field} يجب ان تكون اصغر من 0:{min} او تساويها",max:"الحقل {field} يجب ان يحتوي على 0:{length} حروف على الأكثر",mimes:"نوع ملف {field} غير صحيح",min_value:"قيمة الحقل {field} يجب ان تكون اكبر من 0:{min} او تساويها",min:"الحقل {field} يجب ان يحتوي على 0:{length} حروف على الأقل",numeric:"{field} يمكن ان يحتوي فقط على ارقام",one_of:"الحقل {field} يجب ان يكون قيمة صحيحة",regex:"الحقل {field} غير صحيح",required:"{field} مطلوب",required_if:"حقل {field} مطلوب",size:"{field} يجب ان يكون اقل من 0:{size} كيلوبايت",url:"حقل {field} ليس رابطاً صحيحاً"},Y={code:E,messages:M};f("required",S);f("email",C);f("regex",T);w("zh_TW");x({generateMessage:k({zh_TW:U,ar:Y}),validateOnInput:!0});const N={data(){return{signUser:{fullname:"",username:"",password:""},user:{username:"",password:""},isLoading:!1}},emits:["emit-member","emit-dashboard-page"],components:{VForm:L,VField:y,ErrorMessage:V,Loading:P},methods:{isMemberPage(){location.href.split("#/")[1]==="member"?this.$emit("emit-member",!1):this.$emit("emit-member",!0)},isDashboardPage(){this.$emit("emit-dashboard-page")},async onSubmit(){try{this.isLoading=!0;const s=(await this.axios.post("https://ec-course-api.hexschool.io/v2/admin/signin",this.user)).data;document.cookie=`hexToken=${s.token};expires=${new Date(s.required)}`,this.axios.defaults.headers.common.Authorization=s.token,this.user.username="",this.user.password="",this.isLoading=!1,d.fire({icon:"success",title:"Login Successful",showConfirmButton:!1,timer:800}),this.$router.push("dashboard/products")}catch(s){console.log(s),this.isLoading=!1,this.logout()}},onSubmitSingUp(){this.isLoading=!0,this.signUser.fullname="",this.signUser.username="",this.signUser.password="",this.isLoading=!1,d.fire({icon:"info",title:"尚未開放註冊",showConfirmButton:!1,timer:800})},async checkLogin(){try{this.isLoading=!0;const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=s;const o=(await this.axios.post("https://ec-course-api.hexschool.io//v2/api/user/check")).data;if(this.isLoading=!1,!o.success)d.fire({icon:"error",title:`${o.message}`,showConfirmButton:!1,timer:800}),this.logout(),this.$router.push("member");else return this.$router.push({name:"products"}),!0}catch(s){this.isLoading=!1,console.log(s),d.fire({icon:"error",title:`${s.response}`,showConfirmButton:!1,timer:800})}},async logout(){try{this.isLoading=!0;const s=await this.axios.post("https://ec-course-api.hexschool.io//v2/logout");console.log(s),document.cookie="hexToken='';expires=Thu, 01 Jan 1970 00:00:00 UTC",this.isLoading=!1,d.fire({icon:"success",title:"LogOut Successful",showConfirmButton:!1,timer:800}),this.isMemberPage()}catch(s){console.log(s),document.cookie="hexToken='';expires=Thu, 01 Jan 1970 00:00:00 UTC",this.isLoading=!1}},isPwd(s){return new RegExp("^[\\w]{8,}$").test(s)?!0:"密碼為包含英文加數字，最少 8 碼"}},mounted(){this.isMemberPage(),this.isDashboardPage(),this.checkLogin()}},D={class:"member"},I={key:1,class:"section"},A={class:"container"},J={class:"row full-height justify-content-center"},O={class:"col-12 text-center align-self-center py-5"},R={class:"section pb-5 pt-5 pt-sm-2 text-center"},W=e("h6",{class:"mb-0 pb-3 fs-md-4 fs-6"},[e("span",null,"Log In "),e("span",null,"Sign Up")],-1),$=e("input",{class:"checkbox",type:"checkbox",id:"reg-log",name:"reg-log"},null,-1),j=e("label",{for:"reg-log"},null,-1),G={class:"card-3d-wrap mx-auto"},H={class:"card-3d-wrapper"},K={class:"card-front"},Q={class:"center-wrap"},X=e("h4",{class:"mb-4 pb-3 fs-md-4 fs-6"},"Log In",-1),Z={class:"form-group"},ee=e("i",{class:"input-icon uil uil-at"},null,-1),se={class:"form-group mt-2"},oe=e("i",{class:"input-icon uil uil-lock-alt"},null,-1),ie=e("button",{type:"submit",class:"btn mt-4"},"submit",-1),te=e("p",{class:"mb-0 mt-4 text-center"},[e("a",{href:"#0",class:"link"},"Forgot your password?")],-1),le={class:"card-back"},ae={class:"center-wrap"},ne=e("h4",{class:"mb-4 pb-3 fs-md-4 fs-6"},"Sign Up",-1),re={class:"form-group"},ce=e("i",{class:"input-icon uil uil-user"},null,-1),de={class:"form-group mt-2"},ue=e("i",{class:"input-icon uil uil-at"},null,-1),me={class:"form-group mt-2"},he=e("i",{class:"input-icon uil uil-lock-alt"},null,-1),fe=e("button",{type:"submit",class:"btn mt-4"},"submit",-1);function pe(s,o,ge,_e,t,a){const v=m("Loading"),r=m("v-field"),c=m("error-message"),p=m("v-form");return h(),g(q,null,[i(v,{"prop-boolean":t.isLoading},null,8,["prop-boolean"]),e("div",D,[a.checkLogin?(h(),z(F,{key:0,to:"#logBtn"},[e("button",{class:"btn btn-outline-primary fs-md-4 fs-6",onClick:o[0]||(o[0]=(...n)=>a.logout&&a.logout(...n))},"登出")])):_("",!0),a.checkLogin?_("",!0):(h(),g("div",I,[e("div",A,[e("div",J,[e("div",O,[e("div",R,[W,$,j,e("div",G,[e("div",H,[e("div",K,[e("div",Q,[i(p,{class:"section text-center",onSubmit:a.onSubmit},{default:b(({errors:n})=>[X,e("div",Z,[i(r,{type:"email",name:"email",class:u([{"is-invalid":n.email},"form-style"]),placeholder:"Your Email",autocomplete:"off",rules:"email|required",modelValue:t.user.username,"onUpdate:modelValue":o[1]||(o[1]=l=>t.user.username=l)},null,8,["class","modelValue"]),i(c,{name:"email",class:"invalid-feedback"}),ee]),e("div",se,[i(r,{type:"password",name:"密碼",class:u([{"is-invalid":n.密碼},"form-style"]),placeholder:"Your Password",autocomplete:"off",rules:a.isPwd,modelValue:t.user.password,"onUpdate:modelValue":o[2]||(o[2]=l=>t.user.password=l)},null,8,["class","rules","modelValue"]),i(c,{name:"密碼",class:"invalid-feedback"}),oe]),ie,te]),_:1},8,["onSubmit"])])]),e("div",le,[e("div",ae,[i(p,{class:"section text-center",onSubmit:a.onSubmitSingUp},{default:b(({errors:n})=>[ne,e("div",re,[i(r,{type:"text",name:"姓名",class:u([{"is-invalid":n.姓名},"form-style"]),placeholder:"Your Full Name",autocomplete:"off",rules:"required",modelValue:t.signUser.fullname,"onUpdate:modelValue":o[3]||(o[3]=l=>t.signUser.fullname=l)},null,8,["class","modelValue"]),i(c,{name:"姓名",class:"invalid-feedback"}),ce]),e("div",de,[i(r,{type:"email",name:"信箱",class:u([{"is-invalid":n.信箱},"form-style"]),placeholder:"Your Email",autocomplete:"off",rules:"email|required",modelValue:t.signUser.username,"onUpdate:modelValue":o[4]||(o[4]=l=>t.signUser.username=l)},null,8,["class","modelValue"]),i(c,{name:"信箱",class:"invalid-feedback"}),ue]),e("div",me,[i(r,{type:"password",name:"密碼",class:u([{"is-invalid":n.密碼},"form-style"]),placeholder:"Your Password",autocomplete:"off",rules:a.isPwd,modelValue:t.signUser.password,"onUpdate:modelValue":o[5]||(o[5]=l=>t.signUser.password=l)},null,8,["class","rules","modelValue"]),i(c,{name:"密碼",class:"invalid-feedback"}),he]),fe]),_:1},8,["onSubmit"])])])])])])])])])]))])],64)}const we=B(N,[["render",pe]]);export{we as default};
