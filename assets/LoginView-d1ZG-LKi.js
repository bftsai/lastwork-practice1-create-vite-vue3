import{d as f,s as w,c as x,l as k,F as y,a as V,E as U,z as L,r as S,e as T,b as C}from"./zh_TW-_DaG0CaD.js";import{S as m}from"./sweetalert2-ZIaHzjpx.js";import{_ as P,r as u,c as _,k as $,a as e,T as z,d as b,e as t,w as v,o as h,n as d}from"./index-NLh_45SY.js";const B="ar",q={alpha:"{field} يجب ان يحتوي على حروف فقط",alpha_num:"{field} قد يحتوي فقط على حروف وارقام",alpha_dash:"{field} قد يحتوي على حروف او الرموز - و _",alpha_spaces:"{field} قد يحتوي فقط على حروف ومسافات",between:"قيمة {field} يجب ان تكون ما بين 0:{min} و 1:{max}",confirmed:"{field} لا يماثل التأكيد",digits:"{field} يجب ان تحتوي فقط على ارقام والا يزيد عددها عن 0:{length} رقم",dimensions:"{field} يجب ان تكون بمقاس 0:{width} بكسل في 1:{height} بكسل",email:"{field} يجب ان يكون بريدا اليكتروني صحيح",not_one_of:"الحقل {field} غير صحيح",ext:"نوع ملف {field} غير صحيح",image:"{field} يجب ان تكون صورة",integer:"الحقل {field} يجب ان يكون عدداً صحيحاً",length:"حقل {field} يجب الا يزيد عن 0:{length}",max_value:"قيمة الحقل {field} يجب ان تكون اصغر من 0:{min} او تساويها",max:"الحقل {field} يجب ان يحتوي على 0:{length} حروف على الأكثر",mimes:"نوع ملف {field} غير صحيح",min_value:"قيمة الحقل {field} يجب ان تكون اكبر من 0:{min} او تساويها",min:"الحقل {field} يجب ان يحتوي على 0:{length} حروف على الأقل",numeric:"{field} يمكن ان يحتوي فقط على ارقام",one_of:"الحقل {field} يجب ان يكون قيمة صحيحة",regex:"الحقل {field} غير صحيح",required:"{field} مطلوب",required_if:"حقل {field} مطلوب",size:"{field} يجب ان يكون اقل من 0:{size} كيلوبايت",url:"حقل {field} ليس رابطاً صحيحاً"},F={code:B,messages:q};f("required",S);f("email",T);f("regex",C);w("zh_TW");x({generateMessage:k({zh_TW:L,ar:F}),validateOnInput:!0});const E={data(){return{signUser:{fullname:"",username:"",password:""},user:{username:"",password:""}}},props:["isLogin"],components:{VForm:y,VField:V,ErrorMessage:U},methods:{isMemberPage(){location.href.split("#/")[1]==="member"?this.$emit("emit-member",!1):this.$emit("emit-member",!0)},isDashboardPage(){this.$emit("emit-dashboard-page")},async onSubmit(){try{this.$emit("emit-toggleLoading");const o=(await this.axios.post("https://ec-course-api.hexschool.io/v2/admin/signin",this.user)).data;document.cookie=`hexToken=${o.token};expires=${new Date(o.required)}`,this.axios.defaults.headers.common.Authorization=o.token,this.user.username="",this.user.password="",this.$emit("emit-toggleLoading"),m.fire({icon:"success",title:"Login Successful",showConfirmButton:!1,timer:800}),this.$router.push("dashboard/products")}catch(o){console.log(o),this.$emit("emit-toggleLoading"),this.logout()}},onSubmitSingUp(){this.signUser.fullname="",this.signUser.username="",this.signUser.password="",m.fire({icon:"info",title:"尚未開放註冊",showConfirmButton:!1,timer:800})},async checkLogin(){try{this.$emit("emit-toggleLoading");const o=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=o;const s=(await this.axios.post("https://ec-course-api.hexschool.io//v2/api/user/check")).data;console.log(s),this.$emit("emit-toggleLoading"),s.success||(m.fire({icon:"error",title:`${s.message}`,showConfirmButton:!1,timer:800}),this.logout(),this.$router.push("member"))}catch(o){this.$emit("emit-toggleLoading"),console.log(o)}},async logout(){try{this.$emit("emit-toggleLoading");const o=await this.axios.post("https://ec-course-api.hexschool.io//v2/logout");console.log(o),document.cookie="hexToken='';expires=Thu, 01 Jan 1970 00:00:00 UTC",this.$emit("emit-toggleLoading"),m.fire({icon:"success",title:"LogOut Successful",showConfirmButton:!1,timer:800}),this.isMemberPage()}catch(o){console.log(o),document.cookie="hexToken='';expires=Thu, 01 Jan 1970 00:00:00 UTC",this.$emit("emit-toggleLoading")}},isPwd(o){return new RegExp("^[\\w]{8,}$").test(o)?!0:"密碼為包含英文加數字，最少 8 碼"}},created(){},mounted(){this.isMemberPage(),this.isDashboardPage()}},M={class:"member"},Y={key:1,class:"section"},N={class:"container"},D={class:"row full-height justify-content-center"},I={class:"col-12 text-center align-self-center py-5"},A={class:"section pb-5 pt-5 pt-sm-2 text-center"},J=e("h6",{class:"mb-0 pb-3 fs-md-4 fs-6"},[e("span",null,"Log In "),e("span",null,"Sign Up")],-1),O=e("input",{class:"checkbox",type:"checkbox",id:"reg-log",name:"reg-log"},null,-1),R=e("label",{for:"reg-log"},null,-1),W={class:"card-3d-wrap mx-auto"},j={class:"card-3d-wrapper"},G={class:"card-front"},H={class:"center-wrap"},K=e("h4",{class:"mb-4 pb-3 fs-md-4 fs-6"},"Log In",-1),Q={class:"form-group"},X=e("i",{class:"input-icon uil uil-at"},null,-1),Z={class:"form-group mt-2"},ee=e("i",{class:"input-icon uil uil-lock-alt"},null,-1),se=e("button",{type:"submit",class:"btn mt-4"},"submit",-1),oe=e("p",{class:"mb-0 mt-4 text-center"},[e("a",{href:"#0",class:"link"},"Forgot your password?")],-1),te={class:"card-back"},ie={class:"center-wrap"},le=e("h4",{class:"mb-4 pb-3 fs-md-4 fs-6"},"Sign Up",-1),ae={class:"form-group"},ne=e("i",{class:"input-icon uil uil-user"},null,-1),re={class:"form-group mt-2"},ce=e("i",{class:"input-icon uil uil-at"},null,-1),de={class:"form-group mt-2"},me=e("i",{class:"input-icon uil uil-lock-alt"},null,-1),ue=e("button",{type:"submit",class:"btn mt-4"},"submit",-1);function he(o,s,g,fe,i,n){const r=u("v-field"),c=u("error-message"),p=u("v-form");return h(),_("div",M,[g.isLogin?(h(),$(z,{key:0,to:"#logBtn"},[e("button",{class:"btn btn-outline-primary fs-md-4 fs-6",onClick:s[0]||(s[0]=(...a)=>n.logout&&n.logout(...a))},"登出")])):b("",!0),g.isLogin?b("",!0):(h(),_("div",Y,[e("div",N,[e("div",D,[e("div",I,[e("div",A,[J,O,R,e("div",W,[e("div",j,[e("div",G,[e("div",H,[t(p,{class:"section text-center",onSubmit:n.onSubmit},{default:v(({errors:a})=>[K,e("div",Q,[t(r,{type:"email",name:"email",class:d([{"is-invalid":a.email},"form-style"]),placeholder:"Your Email",autocomplete:"off",rules:"email|required",modelValue:i.user.username,"onUpdate:modelValue":s[1]||(s[1]=l=>i.user.username=l)},null,8,["class","modelValue"]),t(c,{name:"email",class:"invalid-feedback"}),X]),e("div",Z,[t(r,{type:"password",name:"密碼",class:d([{"is-invalid":a.密碼},"form-style"]),placeholder:"Your Password",autocomplete:"off",rules:n.isPwd,modelValue:i.user.password,"onUpdate:modelValue":s[2]||(s[2]=l=>i.user.password=l)},null,8,["class","rules","modelValue"]),t(c,{name:"密碼",class:"invalid-feedback"}),ee]),se,oe]),_:1},8,["onSubmit"])])]),e("div",te,[e("div",ie,[t(p,{class:"section text-center",onSubmit:n.onSubmitSingUp},{default:v(({errors:a})=>[le,e("div",ae,[t(r,{type:"text",name:"姓名",class:d([{"is-invalid":a.姓名},"form-style"]),placeholder:"Your Full Name",autocomplete:"off",rules:"required",modelValue:i.signUser.fullname,"onUpdate:modelValue":s[3]||(s[3]=l=>i.signUser.fullname=l)},null,8,["class","modelValue"]),t(c,{name:"姓名",class:"invalid-feedback"}),ne]),e("div",re,[t(r,{type:"email",name:"信箱",class:d([{"is-invalid":a.信箱},"form-style"]),placeholder:"Your Email",autocomplete:"off",rules:"email|required",modelValue:i.signUser.username,"onUpdate:modelValue":s[4]||(s[4]=l=>i.signUser.username=l)},null,8,["class","modelValue"]),t(c,{name:"信箱",class:"invalid-feedback"}),ce]),e("div",de,[t(r,{type:"password",name:"密碼",class:d([{"is-invalid":a.密碼},"form-style"]),placeholder:"Your Password",autocomplete:"off",rules:n.isPwd,modelValue:i.signUser.password,"onUpdate:modelValue":s[5]||(s[5]=l=>i.signUser.password=l)},null,8,["class","rules","modelValue"]),t(c,{name:"密碼",class:"invalid-feedback"}),me]),ue]),_:1},8,["onSubmit"])])])])])])])])])]))])}const be=P(E,[["render",he]]);export{be as default};
