import{d as h,s as x,c as w,l as k,F as L,a as y,E as V,z as U,r as S,e as T,b as z}from"./zh_TW-CQ7pAcn_.js";import{S as p}from"./sweetalert2-0WhR_hB3.js";import{L as C}from"./Loading-5F5Xc1ih.js";import{_ as F,c as g,a as t,b as e,x as P,T as q,m as _,w as b,F as B,r as u,o as m,p as c}from"./index-_1f98PDL.js";const E="ar",Y={alpha:"{field} يجب ان يحتوي على حروف فقط",alpha_num:"{field} قد يحتوي فقط على حروف وارقام",alpha_dash:"{field} قد يحتوي على حروف او الرموز - و _",alpha_spaces:"{field} قد يحتوي فقط على حروف ومسافات",between:"قيمة {field} يجب ان تكون ما بين 0:{min} و 1:{max}",confirmed:"{field} لا يماثل التأكيد",digits:"{field} يجب ان تحتوي فقط على ارقام والا يزيد عددها عن 0:{length} رقم",dimensions:"{field} يجب ان تكون بمقاس 0:{width} بكسل في 1:{height} بكسل",email:"{field} يجب ان يكون بريدا اليكتروني صحيح",not_one_of:"الحقل {field} غير صحيح",ext:"نوع ملف {field} غير صحيح",image:"{field} يجب ان تكون صورة",integer:"الحقل {field} يجب ان يكون عدداً صحيحاً",length:"حقل {field} يجب الا يزيد عن 0:{length}",max_value:"قيمة الحقل {field} يجب ان تكون اصغر من 0:{min} او تساويها",max:"الحقل {field} يجب ان يحتوي على 0:{length} حروف على الأكثر",mimes:"نوع ملف {field} غير صحيح",min_value:"قيمة الحقل {field} يجب ان تكون اكبر من 0:{min} او تساويها",min:"الحقل {field} يجب ان يحتوي على 0:{length} حروف على الأقل",numeric:"{field} يمكن ان يحتوي فقط على ارقام",one_of:"الحقل {field} يجب ان يكون قيمة صحيحة",regex:"الحقل {field} غير صحيح",required:"{field} مطلوب",required_if:"حقل {field} مطلوب",size:"{field} يجب ان يكون اقل من 0:{size} كيلوبايت",url:"حقل {field} ليس رابطاً صحيحاً"},M={code:E,messages:Y};h("required",S);h("email",T);h("regex",z);x("zh_TW");w({generateMessage:k({zh_TW:U,ar:M}),validateOnInput:!0});const N={data(){return{signUser:{fullname:"",username:"",password:""},user:{username:"",password:""},isLoading:!1,stateLogin:!1}},emits:["emit-member","emit-dashboard-page"],components:{VForm:L,VField:y,ErrorMessage:V,Loading:C},methods:{isMemberPage(){location.href.split("#/")[1]==="member"?this.$emit("emit-member",!1):this.$emit("emit-member",!0)},isDashboardPage(){this.$emit("emit-dashboard-page")},async onSubmit(){try{this.isLoading=!0;const s=(await this.axios.post("https://ec-course-api.hexschool.io/v2/admin/signin",this.user)).data;document.cookie=`hexToken=${s.token};expires=${new Date(s.required)}`,this.axios.defaults.headers.common.Authorization=s.token,this.user.username="",this.user.password="",this.isLoading=!1,p.fire({icon:"success",title:"Login Successful",showConfirmButton:!1,timer:800}),this.$router.push("dashboard/products")}catch(s){console.log(s),this.isLoading=!1,this.logout()}},onSubmitSingUp(){this.isLoading=!0,this.signUser.fullname="",this.signUser.username="",this.signUser.password="",this.isLoading=!1,p.fire({icon:"info",title:"尚未開放註冊",showConfirmButton:!1,timer:800})},async checkLogin(){try{this.isLoading=!0;const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=s;const o=(await this.axios.post("https://ec-course-api.hexschool.io//v2/api/user/check")).data;this.isLoading=!1,o.success?(this.$router.push({name:"products"}),this.stateLogin=!0):(this.logout(),this.stateLogin=!1)}catch(s){return this.isLoading=!1,console.log(s),!1}},async logout(){try{this.isLoading=!0;const s=await this.axios.post("https://ec-course-api.hexschool.io//v2/logout");console.log(s),document.cookie="hexToken='';expires=Thu, 01 Jan 1970 00:00:00 UTC",this.isLoading=!1}catch(s){console.log(s),document.cookie="hexToken='';expires=Thu, 01 Jan 1970 00:00:00 UTC",this.isLoading=!1}},isPwd(s){return new RegExp("^[\\w]{8,}$").test(s)?!0:"密碼為包含英文加數字，最少 8 碼"}},mounted(){this.isMemberPage(),this.isDashboardPage(),this.checkLogin()}},D={class:"member"},I={key:1,class:"section"},A={class:"container"},J={class:"row full-height justify-content-center"},R={class:"col-12 text-center align-self-center py-5"},W={class:"section pb-5 pt-5 pt-sm-2 text-center"},j=e("h6",{class:"mb-0 pb-3 fs-md-4 fs-6"},[e("span",null,"Log In "),e("span",null,"Sign Up")],-1),O=e("input",{class:"checkbox",type:"checkbox",id:"reg-log",name:"reg-log"},null,-1),G=e("label",{for:"reg-log"},null,-1),H={class:"card-3d-wrap mx-auto"},K={class:"card-3d-wrapper"},Q={class:"card-front"},X={class:"center-wrap"},Z=e("h4",{class:"mb-4 pb-3 fs-md-4 fs-6"},"Log In",-1),$={class:"form-group"},ee=e("i",{class:"input-icon uil uil-at"},null,-1),se={class:"form-group mt-2"},oe=e("i",{class:"input-icon uil uil-lock-alt"},null,-1),ie=e("button",{type:"submit",class:"btn mt-4"},"submit",-1),te=e("p",{class:"mb-0 mt-4 text-center"},[e("a",{href:"#0",class:"link"},"Forgot your password?")],-1),le={class:"card-back"},ae={class:"center-wrap"},ne=e("h4",{class:"mb-4 pb-3 fs-md-4 fs-6"},"Sign Up",-1),re={class:"form-group"},de=e("i",{class:"input-icon uil uil-user"},null,-1),ce={class:"form-group mt-2"},ue=e("i",{class:"input-icon uil uil-at"},null,-1),me={class:"form-group mt-2"},he=e("i",{class:"input-icon uil uil-lock-alt"},null,-1),fe=e("button",{type:"submit",class:"btn mt-4"},"submit",-1);function pe(s,o,ge,_e,i,n){const v=u("Loading"),r=u("v-field"),d=u("error-message"),f=u("v-form");return m(),g(B,null,[t(v,{"prop-boolean":i.isLoading},null,8,["prop-boolean"]),e("div",D,[i.stateLogin?(m(),P(q,{key:0,to:"#logBtn"},[e("button",{class:"btn btn-outline-primary fs-md-4 fs-6",onClick:o[0]||(o[0]=(...a)=>n.logout&&n.logout(...a))},"登出")])):_("",!0),i.stateLogin?_("",!0):(m(),g("div",I,[e("div",A,[e("div",J,[e("div",R,[e("div",W,[j,O,G,e("div",H,[e("div",K,[e("div",Q,[e("div",X,[t(f,{class:"section text-center",onSubmit:n.onSubmit},{default:b(({errors:a})=>[Z,e("div",$,[t(r,{type:"email",name:"email",class:c([{"is-invalid":a.email},"form-style"]),placeholder:"Your Email",autocomplete:"off",rules:"email|required",modelValue:i.user.username,"onUpdate:modelValue":o[1]||(o[1]=l=>i.user.username=l)},null,8,["class","modelValue"]),t(d,{name:"email",class:"invalid-feedback"}),ee]),e("div",se,[t(r,{type:"password",name:"密碼",class:c([{"is-invalid":a.密碼},"form-style"]),placeholder:"Your Password",autocomplete:"off",rules:n.isPwd,modelValue:i.user.password,"onUpdate:modelValue":o[2]||(o[2]=l=>i.user.password=l)},null,8,["class","rules","modelValue"]),t(d,{name:"密碼",class:"invalid-feedback"}),oe]),ie,te]),_:1},8,["onSubmit"])])]),e("div",le,[e("div",ae,[t(f,{class:"section text-center",onSubmit:n.onSubmitSingUp},{default:b(({errors:a})=>[ne,e("div",re,[t(r,{type:"text",name:"姓名",class:c([{"is-invalid":a.姓名},"form-style"]),placeholder:"Your Full Name",autocomplete:"off",rules:"required",modelValue:i.signUser.fullname,"onUpdate:modelValue":o[3]||(o[3]=l=>i.signUser.fullname=l)},null,8,["class","modelValue"]),t(d,{name:"姓名",class:"invalid-feedback"}),de]),e("div",ce,[t(r,{type:"email",name:"信箱",class:c([{"is-invalid":a.信箱},"form-style"]),placeholder:"Your Email",autocomplete:"off",rules:"email|required",modelValue:i.signUser.username,"onUpdate:modelValue":o[4]||(o[4]=l=>i.signUser.username=l)},null,8,["class","modelValue"]),t(d,{name:"信箱",class:"invalid-feedback"}),ue]),e("div",me,[t(r,{type:"password",name:"密碼",class:c([{"is-invalid":a.密碼},"form-style"]),placeholder:"Your Password",autocomplete:"off",rules:n.isPwd,modelValue:i.signUser.password,"onUpdate:modelValue":o[5]||(o[5]=l=>i.signUser.password=l)},null,8,["class","rules","modelValue"]),t(d,{name:"密碼",class:"invalid-feedback"}),he]),fe]),_:1},8,["onSubmit"])])])])])])])])])]))])],64)}const ke=F(N,[["render",pe]]);export{ke as default};
